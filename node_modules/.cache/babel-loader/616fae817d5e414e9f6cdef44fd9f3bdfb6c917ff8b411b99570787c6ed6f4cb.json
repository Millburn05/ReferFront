{"ast":null,"code":"import React,{useState}from'react';import'react-quill/dist/quill.snow.css';import'./ReferralApp.css';import{useAuth0}from'@auth0/auth0-react';import Content from'./components/Content';import LogoutButton from'./components/Logout';import LandingPage from'./components/LandingPage';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const baseUrl='https://copy-paste-refer.azurewebsites.net';/*const baseUrl = 'http://localhost:8000';*/const ReferralApp=()=>{const[referralTo,setReferralTo]=useState('');const[reasonForReferral,setReasonForReferral]=useState('');const[notes,setNotes]=useState('');const[referralResponse,setReferralResponse]=useState('');const[isLoading,setIsLoading]=useState(false);// Loading state\nconst{isAuthenticated,getAccessTokenSilently,logout}=useAuth0();const handleGenerateReferral=async()=>{setIsLoading(true);// Set loading state to true\nconst formattedNotes=\"Referral to: \".concat(referralTo,\"\\nReason for referral: \").concat(reasonForReferral,\"\\n\\n\").concat(notes);const payload={content:formattedNotes};try{const token=await getAccessTokenSilently();const response=await fetch(\"\".concat(baseUrl,\"/generate-referral/\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(payload)});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}const data=await response.json();if(data.message){setReferralResponse(data.message);}else{setReferralResponse(\"Run Status: \".concat(data.status));}}catch(error){if(error instanceof Error){console.error(\"Failed to generate referral: \".concat(error.message));setReferralResponse(\"Error: \".concat(error.message));}}finally{setIsLoading(false);// Set loading state to false\n}};return/*#__PURE__*/_jsxs(_Fragment,{children:[!isAuthenticated&&/*#__PURE__*/_jsx(LandingPage,{}),isAuthenticated&&/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Logout-container\",children:/*#__PURE__*/_jsx(LogoutButton,{})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Copy-Paste-Refer\"}),/*#__PURE__*/_jsx(Content,{referralTo:referralTo,setReferralTo:setReferralTo,reasonForReferral:reasonForReferral,setReasonForReferral:setReasonForReferral,notes:notes,setNotes:setNotes,referralResponse:referralResponse,setReferralResponse:setReferralResponse,handleGenerateReferral:handleGenerateReferral,isLoading:isLoading// Pass loading state\n})]})})]});};export default ReferralApp;","map":{"version":3,"names":["React","useState","useAuth0","Content","LogoutButton","LandingPage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","baseUrl","ReferralApp","referralTo","setReferralTo","reasonForReferral","setReasonForReferral","notes","setNotes","referralResponse","setReferralResponse","isLoading","setIsLoading","isAuthenticated","getAccessTokenSilently","logout","handleGenerateReferral","formattedNotes","concat","payload","content","token","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","message","error","console","children","className"],"sources":["C:/Users/david/dev/ReferralAssistant/frontend/src/ReferralApp.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport './ReferralApp.css';  \nimport { useAuth0 } from '@auth0/auth0-react';\nimport Content from './components/Content';\nimport Login from './components/Login';\nimport LogoutButton from './components/Logout';\nimport LandingPage from './components/LandingPage';\n\nconst baseUrl = 'https://copy-paste-refer.azurewebsites.net';\n/*const baseUrl = 'http://localhost:8000';*/\n\nconst ReferralApp: React.FC = () => {\n  const [referralTo, setReferralTo] = useState('');\n  const [reasonForReferral, setReasonForReferral] = useState('');\n  const [notes, setNotes] = useState('');\n  const [referralResponse, setReferralResponse] = useState('');\n  const [isLoading, setIsLoading] = useState(false); // Loading state\n\n  const { isAuthenticated, getAccessTokenSilently, logout } = useAuth0();\n\n  const handleGenerateReferral = async () => {\n    setIsLoading(true); // Set loading state to true\n    const formattedNotes = `Referral to: ${referralTo}\\nReason for referral: ${reasonForReferral}\\n\\n${notes}`;\n    const payload = { content: formattedNotes };\n\n    try {\n      const token = await getAccessTokenSilently();\n      const response = await fetch(`${baseUrl}/generate-referral/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      if (data.message) {\n        setReferralResponse(data.message);\n      } else {\n        setReferralResponse(`Run Status: ${data.status}`);\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        console.error(`Failed to generate referral: ${error.message}`);\n        setReferralResponse(`Error: ${error.message}`);\n      }\n    } finally {\n      setIsLoading(false); // Set loading state to false\n    }\n  };\n\n  return (\n    <>\n      {!isAuthenticated && <LandingPage />}\n      {isAuthenticated && (\n        <div className=\"App\">\n          <div className=\"App-header\">\n            <div className=\"Logout-container\">\n              <LogoutButton />\n            </div>\n            <h1>Copy-Paste-Refer</h1>\n            <Content\n              referralTo={referralTo}\n              setReferralTo={setReferralTo}\n              reasonForReferral={reasonForReferral}\n              setReasonForReferral={setReasonForReferral}\n              notes={notes}\n              setNotes={setNotes}\n              referralResponse={referralResponse}\n              setReferralResponse={setReferralResponse}\n              handleGenerateReferral={handleGenerateReferral}\n              isLoading={isLoading} // Pass loading state\n            />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default ReferralApp;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAEvC,MAAO,iCAAiC,CACxC,MAAO,mBAAmB,CAC1B,OAASC,QAAQ,KAAQ,oBAAoB,CAC7C,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAE1C,MAAO,CAAAC,YAAY,KAAM,qBAAqB,CAC9C,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEnD,KAAM,CAAAC,OAAO,CAAG,4CAA4C,CAC5D,4CAEA,KAAM,CAAAC,WAAqB,CAAGA,CAAA,GAAM,CAClC,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACe,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC9D,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACmB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAACqB,SAAS,CAAEC,YAAY,CAAC,CAAGtB,QAAQ,CAAC,KAAK,CAAC,CAAE;AAEnD,KAAM,CAAEuB,eAAe,CAAEC,sBAAsB,CAAEC,MAAO,CAAC,CAAGxB,QAAQ,CAAC,CAAC,CAEtE,KAAM,CAAAyB,sBAAsB,CAAG,KAAAA,CAAA,GAAY,CACzCJ,YAAY,CAAC,IAAI,CAAC,CAAE;AACpB,KAAM,CAAAK,cAAc,iBAAAC,MAAA,CAAmBf,UAAU,4BAAAe,MAAA,CAA0Bb,iBAAiB,SAAAa,MAAA,CAAOX,KAAK,CAAE,CAC1G,KAAM,CAAAY,OAAO,CAAG,CAAEC,OAAO,CAAEH,cAAe,CAAC,CAE3C,GAAI,CACF,KAAM,CAAAI,KAAK,CAAG,KAAM,CAAAP,sBAAsB,CAAC,CAAC,CAC5C,KAAM,CAAAQ,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAL,MAAA,CAAIjB,OAAO,wBAAuB,CAC5DuB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAP,MAAA,CAAYG,KAAK,CAClC,CAAC,CACDK,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACT,OAAO,CAC9B,CAAC,CAAC,CAEF,GAAI,CAACG,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAZ,MAAA,CAAwBI,QAAQ,CAACS,MAAM,CAAE,CAAC,CAC3D,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,CAACE,OAAO,CAAE,CAChBxB,mBAAmB,CAACsB,IAAI,CAACE,OAAO,CAAC,CACnC,CAAC,IAAM,CACLxB,mBAAmB,gBAAAQ,MAAA,CAAgBc,IAAI,CAACD,MAAM,CAAE,CAAC,CACnD,CACF,CAAE,MAAOI,KAAK,CAAE,CACd,GAAIA,KAAK,WAAY,CAAAL,KAAK,CAAE,CAC1BM,OAAO,CAACD,KAAK,iCAAAjB,MAAA,CAAiCiB,KAAK,CAACD,OAAO,CAAE,CAAC,CAC9DxB,mBAAmB,WAAAQ,MAAA,CAAWiB,KAAK,CAACD,OAAO,CAAE,CAAC,CAChD,CACF,CAAC,OAAS,CACRtB,YAAY,CAAC,KAAK,CAAC,CAAE;AACvB,CACF,CAAC,CAED,mBACEd,KAAA,CAAAE,SAAA,EAAAqC,QAAA,EACG,CAACxB,eAAe,eAAIjB,IAAA,CAACF,WAAW,GAAE,CAAC,CACnCmB,eAAe,eACdjB,IAAA,QAAK0C,SAAS,CAAC,KAAK,CAAAD,QAAA,cAClBvC,KAAA,QAAKwC,SAAS,CAAC,YAAY,CAAAD,QAAA,eACzBzC,IAAA,QAAK0C,SAAS,CAAC,kBAAkB,CAAAD,QAAA,cAC/BzC,IAAA,CAACH,YAAY,GAAE,CAAC,CACb,CAAC,cACNG,IAAA,OAAAyC,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBzC,IAAA,CAACJ,OAAO,EACNW,UAAU,CAAEA,UAAW,CACvBC,aAAa,CAAEA,aAAc,CAC7BC,iBAAiB,CAAEA,iBAAkB,CACrCC,oBAAoB,CAAEA,oBAAqB,CAC3CC,KAAK,CAAEA,KAAM,CACbC,QAAQ,CAAEA,QAAS,CACnBC,gBAAgB,CAAEA,gBAAiB,CACnCC,mBAAmB,CAAEA,mBAAoB,CACzCM,sBAAsB,CAAEA,sBAAuB,CAC/CL,SAAS,CAAEA,SAAW;AAAA,CACvB,CAAC,EACC,CAAC,CACH,CACN,EACD,CAAC,CAEP,CAAC,CAED,cAAe,CAAAT,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}