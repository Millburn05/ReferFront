{"ast":null,"code":"import React,{useState}from'react';import ReactQuill from'react-quill';import'react-quill/dist/quill.snow.css';import\"./ReferralApp.css\";import{useAuth0}from'@auth0/auth0-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const baseUrl='http://localhost:8000';const ReferralApp=()=>{const[referralTo,setReferralTo]=useState('');const[reasonForReferral,setReasonForReferral]=useState('');const[notes,setNotes]=useState('');const[referralResponse,setReferralResponse]=useState('');// State to hold the editable referral response\nconst{getAccessTokenSilently,logout}=useAuth0();const handleGenerateReferral=async()=>{const formattedNotes=\"Referral to: \".concat(referralTo,\"\\nReason for referral: \").concat(reasonForReferral,\"\\n\\n\").concat(notes);const payload={content:formattedNotes};try{const token=await getAccessTokenSilently();const response=await fetch(\"\".concat(baseUrl,\"/generate-referral/\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify(payload)});if(!response.ok){throw new Error(\"HTTP error! Status: \".concat(response.status));}const data=await response.json();if(data.message){setReferralResponse(data.message);// Set the editable referral response\n}else{setReferralResponse(\"Run Status: \".concat(data.status));}}catch(error){if(error instanceof Error){console.error(\"Failed to generate referral: \".concat(error.message));setReferralResponse(\"Error: \".concat(error.message));}}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"App-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Copy-Paste-Refer\"}),/*#__PURE__*/_jsx(LogoutButton,{logout:logout}),/*#__PURE__*/_jsx(\"textarea\",{className:\"ReferralTo\",value:referralTo,onChange:e=>setReferralTo(e.target.value),placeholder:\"Referral to\",rows:1,cols:40}),/*#__PURE__*/_jsx(\"textarea\",{className:\"ReasonForReferral\",value:reasonForReferral,onChange:e=>setReasonForReferral(e.target.value),placeholder:\"Reason for referral\",rows:1,cols:40}),/*#__PURE__*/_jsx(\"textarea\",{className:\"Notes-input textarea-border\",value:notes,onChange:e=>setNotes(e.target.value),placeholder:\"Enter patient notes here\",rows:10,cols:100}),/*#__PURE__*/_jsx(\"button\",{className:\"GenerateButton\",onClick:handleGenerateReferral,children:\"Generate Referral\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Referral Letter:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"ql-editor\",children:/*#__PURE__*/_jsx(ReactQuill,{theme:\"snow\",value:referralResponse,onChange:setReferralResponse,readOnly:false,modules:{toolbar:true}})}),/*#__PURE__*/_jsx(\"button\",{className:\"SendToSecretaryButton\",children:\"Send to Secretary\"})]})});};const LogoutButton=_ref=>{let{logout}=_ref;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>logout({logoutParams:{returnTo:window.location.origin}}),children:\"Log Out\"});};export default ReferralApp;","map":{"version":3,"names":["React","useState","ReactQuill","useAuth0","jsx","_jsx","jsxs","_jsxs","baseUrl","ReferralApp","referralTo","setReferralTo","reasonForReferral","setReasonForReferral","notes","setNotes","referralResponse","setReferralResponse","getAccessTokenSilently","logout","handleGenerateReferral","formattedNotes","concat","payload","content","token","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","message","error","console","className","children","LogoutButton","value","onChange","e","target","placeholder","rows","cols","onClick","theme","readOnly","modules","toolbar","_ref","logoutParams","returnTo","window","location","origin"],"sources":["C:/Users/david/dev/ReferralAssistant/frontend/src/ReferralApp.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport \"./ReferralApp.css\";\nimport { useAuth0 } from '@auth0/auth0-react';\n\nconst baseUrl = 'http://localhost:8000';\n\nconst ReferralApp: React.FC = () => {\n  const [referralTo, setReferralTo] = useState('');\n  const [reasonForReferral, setReasonForReferral] = useState('');\n  const [notes, setNotes] = useState('');\n  const [referralResponse, setReferralResponse] = useState(''); // State to hold the editable referral response\n\n  const { getAccessTokenSilently, logout } = useAuth0();\n\n  const handleGenerateReferral = async () => {\n    const formattedNotes = `Referral to: ${referralTo}\\nReason for referral: ${reasonForReferral}\\n\\n${notes}`;\n    const payload = { content: formattedNotes };\n\n    try {\n      const token = await getAccessTokenSilently();\n      const response = await fetch(`${baseUrl}/generate-referral/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(payload)\n      });\n\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const data = await response.json();\n      if (data.message) {\n        setReferralResponse(data.message); // Set the editable referral response\n      } else {\n        setReferralResponse(`Run Status: ${data.status}`);\n      }\n    } catch (error) {\n      if (error instanceof Error) {\n        console.error(`Failed to generate referral: ${error.message}`);\n        setReferralResponse(`Error: ${error.message}`);\n      }\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"App-header\">\n        <h1>Copy-Paste-Refer</h1>\n        <LogoutButton logout={logout} />\n        <textarea\n          className=\"ReferralTo\"\n          value={referralTo}\n          onChange={(e) => setReferralTo(e.target.value)}\n          placeholder=\"Referral to\"\n          rows={1}\n          cols={40}\n        />\n        <textarea\n          className=\"ReasonForReferral\"\n          value={reasonForReferral}\n          onChange={(e) => setReasonForReferral(e.target.value)}\n          placeholder=\"Reason for referral\"\n          rows={1}\n          cols={40}\n        />\n        <textarea\n          className=\"Notes-input textarea-border\"\n          value={notes}\n          onChange={(e) => setNotes(e.target.value)}\n          placeholder=\"Enter patient notes here\"\n          rows={10}\n          cols={100}\n        />\n        <button className=\"GenerateButton\" onClick={handleGenerateReferral}>Generate Referral</button>\n        <h2>Referral Letter:</h2>\n        <div className=\"ql-editor\">\n          <ReactQuill \n            theme=\"snow\"\n            value={referralResponse}\n            onChange={setReferralResponse}\n            readOnly={false}\n            modules={{ toolbar: true }}\n          />\n        </div>\n        <button className=\"SendToSecretaryButton\">Send to Secretary</button>\n      </div>\n    </div>\n  );\n};\n\nconst LogoutButton: React.FC<{ logout: ReturnType<typeof useAuth0>['logout'] }> = ({ logout }) => (\n  <button onClick={() => logout({ logoutParams: { returnTo: window.location.origin } })}>Log Out</button>\n);\n\nexport default ReferralApp;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}